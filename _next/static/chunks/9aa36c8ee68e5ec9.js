(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,20049,(e,t,r)=>{e.e,t.exports=function(e){"use strict";var t="января_февраля_марта_апреля_мая_июня_июля_августа_сентября_октября_ноября_декабря".split("_"),r="январь_февраль_март_апрель_май_июнь_июль_август_сентябрь_октябрь_ноябрь_декабрь".split("_"),s="янв._февр._мар._апр._мая_июня_июля_авг._сент._окт._нояб._дек.".split("_"),i="янв._февр._март_апр._май_июнь_июль_авг._сент._окт._нояб._дек.".split("_"),a=/D[oD]?(\[[^[\]]*\]|\s)+MMMM?/;function n(e,t,r){var s,i;return"m"===r?t?"минута":"минуту":e+" "+(s=+e,i=({mm:t?"минута_минуты_минут":"минуту_минуты_минут",hh:"час_часа_часов",dd:"день_дня_дней",MM:"месяц_месяца_месяцев",yy:"год_года_лет"})[r].split("_"),s%10==1&&s%100!=11?i[0]:s%10>=2&&s%10<=4&&(s%100<10||s%100>=20)?i[1]:i[2])}var d=function(e,s){return a.test(s)?t[e.month()]:r[e.month()]};d.s=r,d.f=t;var l=function(e,t){return a.test(t)?s[e.month()]:i[e.month()]};l.s=i,l.f=s;var o={name:"ru",weekdays:"воскресенье_понедельник_вторник_среда_четверг_пятница_суббота".split("_"),weekdaysShort:"вск_пнд_втр_срд_чтв_птн_сбт".split("_"),weekdaysMin:"вс_пн_вт_ср_чт_пт_сб".split("_"),months:d,monthsShort:l,weekStart:1,yearStart:4,formats:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY г.",LLL:"D MMMM YYYY г., H:mm",LLLL:"dddd, D MMMM YYYY г., H:mm"},relativeTime:{future:"через %s",past:"%s назад",s:"несколько секунд",m:n,mm:n,h:"час",hh:n,d:"день",dd:n,M:"месяц",MM:n,y:"год",yy:n},ordinal:function(e){return e},meridiem:function(e){return e<4?"ночи":e<12?"утра":e<17?"дня":"вечера"}};return(e&&"object"==typeof e&&"default"in e?e:{default:e}).default.locale(o,null,!0),o}(e.r(22315))},5540,(e,t,r)=>{e.e,t.exports=function(e,t){t.prototype.weekday=function(e){var t=this.$locale().weekStart||0,r=this.$W,s=(r<t?r+7:r)-t;return this.$utils().u(e)?s:this.subtract(s,"day").add(e,"day")}}},39754,(e,t,r)=>{e.e,t.exports=function(e,t,r){var s=function(e){return e.add(4-e.isoWeekday(),"day")},i=t.prototype;i.isoWeekYear=function(){return s(this).year()},i.isoWeek=function(e){if(!this.$utils().u(e))return this.add(7*(e-this.isoWeek()),"day");var t,i,a,n=s(this),d=(t=this.isoWeekYear(),a=4-(i=(this.$u?r.utc:r)().year(t).startOf("year")).isoWeekday(),i.isoWeekday()>4&&(a+=7),i.add(a,"day"));return n.diff(d,"week")+1},i.isoWeekday=function(e){return this.$utils().u(e)?this.day()||7:this.day(this.day()%7?e:e-7)};var a=i.startOf;i.startOf=function(e,t){var r=this.$utils(),s=!!r.u(t)||t;return"isoweek"===r.p(e)?s?this.date(this.date()-(this.isoWeekday()-1)).startOf("day"):this.date(this.date()-1-(this.isoWeekday()-1)+7).endOf("day"):a.bind(this)(e,t)}}},67482,e=>{"use strict";var t=e.i(43476),r=e.i(71645);e.i(76861);var s=e.i(76036),i=e.i(82908),a=e.i(32430),n=e.i(45158),d=e.i(60103),l=e.i(50292),o=e.i(2438),c=e.i(93242),u=e.i(59434),m=e.i(27194),x=e.i(22315);e.i(20049);var h=e.i(5540),f=e.i(39754);x.default.extend(h.default),x.default.extend(f.default),x.default.locale("ru");let p=["ПН","ВТ","СР","ЧТ","ПТ"];function _(){let[e,h]=(0,r.useState)([]),[f,_]=(0,r.useState)(!0),[b,g]=(0,r.useState)(!1),[y,v]=(0,r.useState)(0),j=(0,r.useRef)(!0),k=async(e=0)=>{let t=j.current;t&&_(!0),g(!1);try{let t=(await n.api.get(s.API_ROUTES.INVECTOR.WEEKLY_REPORT,{params:{offset:e}})).data||[];h(t)}catch(e){g(!0)}finally{t&&(_(!1),j.current=!1)}};(0,r.useEffect)(()=>{k(y)},[y]);let N=()=>{v(e=>e+1)},w=()=>{y>0&&v(e=>e-1)},M=(0,r.useMemo)(()=>(0,x.default)().startOf("isoWeek").subtract(y,"week"),[y]),Y=(0,r.useMemo)(()=>{let t={};return e.forEach(e=>{let r=(0,x.default)(e.openTime).isoWeekday()-1;r>=5||(t[r]||(t[r]=[]),t[r].push(e))}),Object.keys(t).forEach(e=>{t[Number(e)].sort((e,t)=>e.openTime-t.openTime)}),t},[e]),L=i.InvectorProducts["weekly-report"],S=i.InvectorSubscriptions["subscription-premium"],T=L&&"subscriptions"in L&&L.subscriptions&&L.subscriptions.length>0,W=T&&L&&"subscriptions"in L&&L.subscriptions[0],$=T&&W?i.InvectorSubscriptions[W.id]:L,O=e.some(e=>e.ticker||e.exchange||e.description);return(0,t.jsxs)("div",{className:"bg-background text-foreground font-sans antialiased min-h-screen",children:[(0,t.jsx)(d.default,{}),(0,t.jsx)("main",{className:"pt-20 pb-16",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 w-full",children:(0,t.jsxs)(m.default,{isLoading:f,hasError:b,preview:L&&S?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,t.jsx)(u.default,{product:L,subscription:S})}):null,children:[(0,t.jsxs)("div",{className:"text-center mb-6 mt-12",children:[(0,t.jsx)("h1",{className:"text-2xl sm:text-3xl md:text-5xl font-bold mb-4 text-heading px-2",children:"Еженедельный отчёт"}),(0,t.jsx)("p",{className:"text-base sm:text-lg md:text-xl text-foreground/80 max-w-3xl mx-auto px-2",children:"Анализ сделок за неделю: Расчет точности совершенных за неделю сделок относительно других возможных позиций"}),(0,t.jsx)("div",{className:"mt-6 px-2",children:(0,t.jsx)(o.default,{})})]}),L&&$&&!O&&(0,t.jsxs)("div",{className:"mb-6 bg-card border border-primary/20 rounded-xl p-4 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[(0,t.jsxs)("p",{className:"text-sm sm:text-base text-foreground/80 flex-1",children:[(0,t.jsx)("span",{className:"font-semibold",children:"Внимание,"})," вы видите не полный контент. Для того, чтобы увидеть всю информацию, необходимо приобрести ",T?"подписку":"продукт","."]}),(0,t.jsx)("button",{onClick:()=>{let e=(0,a.buildPurchaseUrl)($);window.location.href=e},className:"flex-shrink-0 px-6 py-2 bg-primary text-primary-foreground rounded-lg font-medium hover:bg-primary/90 transition-colors whitespace-nowrap",children:"Приобрести доступ"})]}),0!==e.length||f?(0,t.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:p.map((e,r)=>{let s,i,a,n,d=Y[r]||[],l=0===r,o=r===p.length-1;return(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("div",{className:"sticky top-20 z-10 bg-background/95 backdrop-blur-sm py-2 mb-4 min-h-[2.5rem]",children:(0,t.jsxs)("div",{className:"flex items-center h-10",children:[l?(0,t.jsx)("button",{onClick:N,className:"px-2 py-1 bg-card border border-primary/20 rounded-lg font-medium hover:bg-card/80 transition-colors cursor-pointer flex-shrink-0 h-8","aria-label":"Предыдущая неделя",children:"←"}):(0,t.jsx)("div",{className:"w-10 flex-shrink-0 h-8"}),(0,t.jsx)("h2",{className:"text-lg font-semibold text-heading text-center flex-1",children:(s=M.add(r,"day"),i=p[r],a=s.format("DD"),n=s.format("MM"),`${i} ${a}.${n}`)}),o?(0,t.jsx)("button",{onClick:w,disabled:0===y,className:"px-2 py-1 bg-card border border-primary/20 rounded-lg font-medium hover:bg-card/80 transition-colors disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer flex-shrink-0 h-8","aria-label":"Следующая неделя",children:"→"}):(0,t.jsx)("div",{className:"w-10 flex-shrink-0 h-8"})]})}),(0,t.jsx)("div",{className:"space-y-3 flex-1",children:0===d.length?(0,t.jsx)("div",{className:"text-center py-8 text-foreground/40 text-sm bg-card rounded-xl border border-primary/5",children:"Нет сделок"}):d.map((e,r)=>{var s;let i=O&&(e.ticker||e.exchange),a=(s=Math.round(e.countBetterPercent))>50?"bg-green-100/80 border-green-300/70 hover:border-green-400/80":s>=25?"bg-yellow-100/80 border-yellow-300/70 hover:border-yellow-400/80":"bg-red-100/80 border-red-300/70 hover:border-red-400/80";return(0,t.jsxs)("div",{className:`${a} rounded-xl p-3 border transition-colors h-16 flex items-center gap-3`,children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:i?(0,t.jsx)(c.default,{exchange:e.exchange||"",ticker:e.ticker||"",hasLogo:!!(e.exchange&&e.ticker)}):(0,t.jsx)("div",{className:"w-10 h-10 rounded-full bg-foreground/10"})}),(0,t.jsx)("div",{className:"flex-1 min-w-0 flex flex-col justify-center",children:i?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"font-semibold text-gray-900 text-sm truncate",children:e.ticker}),e.description&&(0,t.jsx)("div",{className:"text-xs text-gray-700 truncate",children:e.description})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"h-4 bg-gray-300 rounded-full w-16 mb-1"}),(0,t.jsx)("div",{className:"h-3 bg-gray-300 rounded-full w-24"})]})}),(0,t.jsx)("div",{className:"text-right flex-shrink-0",children:(0,t.jsxs)("div",{className:"text-lg font-bold text-gray-900",children:[Math.round(e.countBetterPercent),"%"]})})]},`${e.openTime}-${r}`)})})]},r)})}):(0,t.jsx)("div",{className:"text-center py-12 text-foreground/60 bg-card rounded-xl",children:"Нет сделок за эту неделю"})]})})}),(0,t.jsx)(l.default,{})]})}e.s(["default",()=>_,"dynamic",0,"force-static"])}]);